<!--
    Air Alarm - Master Nano UI template.

    Used in: code/game/machinery/alarm.dm
    Relies on existence of the following templates:
    -   nano/templates/airalarm_scrubber.tmpl
    -   nano/templates/airalarm_vent.tmpl
    -   nano/templates/airalarm_sensors.tmpl
    -   nano/templates/airalarm_info.tmpl
    -   nano/templates/airalam_css.tmpl

    Parameters generated by this template:
    -   setLock:    true/false
    -   screen:     info, sensors, devices, scrubbers, vents
-->

{{ include "airalarm_css.tmpl " /}}

{^{if userIsSilicon && siliconAccessForbidden }}
    Interface access denied.
{{ else }}
    <div class="notice">
    {^{if userIsSilicon}}
        <div class="itemContentSmall">Interface lock:</div>
        <div class="itemContentFull floatRight">
            {^{:~link(isLocked ? 'Engaged' : 'Engage', 'locked', {'setLock': true}, isLocked ? 'selected' : null)}}
            {^{:~link(isLocked ? 'Disengage' : 'Disengaged', 'unlocked', {'setLock': false}, isLocked ? null : 'selected')}}
        </div>
        <div class="clearBoth"></div>
    {{else}}
        Swipe ID card to {^{:isLocked ? 'unlock' : 'lock'}} the interface.
    {{/if}}
    </div>

    <ul id="menu">
        <li>
            {^{:~link('Information', 'info', {'screen' : 'info'}, canManipulate ? (screen == 'info'  ? 'selected' : null) : 'disabled')}}
        </li>
        
        <li>
            {^{:~link('Sensor Settings', 'signal', {'screen' : 'sensors'}, canManipulate ? (screen == 'sensors' ? 'selected' : null) : 'disabled')}}
        </li>
        
        <li>
            {^{:~link('Linked Devices', 'newwin', {'screen': 'devices'}, canManipulate && (~arrayLength(devices.scrubbers) + ~arrayLength(devices.vents) > 0) ? (screen == 'devices' ? 'selected' : null) : 'disabled')}}
                
            <ul>
                <li>
                    {^{:~link('Scrubbers', 'refresh', {'screen' : 'scrubbers'}, canManipulate && ~arrayLength(devices.scrubbers) > 0 ? (screen == 'scrubbers' ? 'selected' : null) : 'disabled')}}
                </li>
                <li>
                    {^{:~link('Vents', 'signal-diag', {'screen' : 'vents'}, canManipulate && ~arrayLength(devices.vents) > 0 ? (screen == 'vents' ? 'selected' : null) : 'disabled')}}
                </li> 
            </ul>
        </li>

        <li>

    </ul>

    <div id="rightContent">
        {^{if screen == 'info' || !canManipulate tmpl=airalarm_info.html}}
        {{else screen == 'devices' tmpl=airalarm_devices.html}}
        {{else screen == 'sensors' tmpl=airalarm_sensors.html}}
        {{else screen == 'scrubbers'}}
            {^{for devices.scrubbers tmpl=airalarm_scrubber.tmpl}}
            {{else}}
            No air scrubbers are currently linked with this device.
            {{/for}}
        {{else screen == "vents"}}
            {^{for devices.vents tmpl=airalarm_vent.tmpl}}
            {{else}}
            No atmospheric vents are currenty linked with this device.
            {{/for}}
        {{else}}
            Error - unknown screen requested.
        {{/if}}
    </div>
{{/if}}
