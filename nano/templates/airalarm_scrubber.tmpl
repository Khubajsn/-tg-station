<!--
    Air Alarm - scrubber template.
    Used by nano/templates/airalarm.tmpl in a for loop.

    Parameters generated by this template:
    -   mode:       filtering, draught, panic, replace, off
        ++ id_tag (device identifier)

    -   filter:     co2, toxins, n2o
        ++ value:   on/off
        ++ id_tag (device identifier)
-->

<div class="highlight">{{:name}}</div>
            
<table class="switchContainer power">
    <tbody>
        <tr>
            <td data-link="class{:power ? 'active' : 'inactive'}">
                {{:~link('I', false, {'id_tag': id_tag, power: false}, 'on')}}
            </td>
        </tr>
        <tr>
            <td data-link="class{:!power ? 'active' : 'inactive'}">
                {{:~link('O', false, {'id_tag': id_tag, power: true}, 'off')}}
            </td>
        </tr>
        <tr>
            <td class="label">power</td>
        </tr>
    </tbody>
</table>

<table class="switchContainer">
    <tbody>
        <tr>
            <td data-link="class{:mode == 'syphoning' ? 'active' : 'inactive'}">
                {^{if mode == 'syphoning'}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'mode': 'syphoning'}, 'on')}}
                {{/if}}
            </td>
            <td data-link="class{:mode == 'replace' ? 'active' : 'inactive'}">
                {^{if mode == 'replace'}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'mode': 'replace'}, 'on')}}
                {{/if}}
            </td>
            <td data-link="class{:mode == 'draught' ? 'active' : 'inactive'}">
                {^{if mode == 'draught'}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'mode': 'draught'}, 'on')}}
                {{/if}}
            </td>
            <td data-link="class{:mode == 'scrubbing' ? 'active' : 'inactive'}">
                {^{if mode == 'scrubbing'}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'mode': 'scrubbing'}, 'on')}}
                {{/if}}
            </td>
        </tr>
        <tr>
            <td data-link="class{:mode != 'syphoning' ? 'active' : 'inactive'}">
                {{:~link('O', false, {'id_tag': id_tag, 'mode': 'scrubbing'}, 'on')}}
            </td>
            <td data-link="class{:mode != 'replace' ? 'active' : 'inactive'}">
                {{:~link('O', false, {'id_tag': id_tag, 'mode': 'scrubbing'}, 'on')}}
            </td>
            <td data-link="class{:mode != 'draught' ? 'active' : 'inactive'}">
                {{:~link('O', false, {'id_tag': id_tag, 'mode': 'scrubbing'}, 'on')}}
            </td>
            <td data-link="class{:mode != 'scrubbing' ? 'active' : 'inactive'}">
                <a href="javascript:void(0);" class="off">I</a>
            </td>
        </tr>
        <tr>
            <td class="label">Syphon</td>
            <td class="label">Replace</td>
            <td class="label">Draught</td>
            <td class="label">Scrub</td>
        </tr>
    </tbody>
</table>

<table class="switchContainer">
    <tbody>
        <tr>
             <td data-link="class{:settings['co2'] ? 'active' : 'inactive'}">
                {^{if settings['co2']}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'filter': 'co2', 'value': 'on'}, 'on')}}
                {{/if}}
            </td>

            <td data-link="class{:settings['n2o'] ? 'active' : 'inactive'}">
                {^{if settings['n2o']}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'filter': 'n2o', 'value': 'on'}, 'on')}}
                {{/if}}
            </td>

            <td data-link="class{:settings['toxins'] ? 'active' : 'inactive'}">
                {^{if settings['toxins']}}
                    <a href="javascript:void(0);" class="on">I</a>
                {{else}}
                    {{:~link('I', false, {'id_tag': id_tag, 'filter': 'toxins', 'value': 'on'}, 'on')}}
                {{/if}}
            </td>
        </tr>
        <tr>
            <td data-link="class{:settings['co2'] ? 'inactive' : 'active'}">
                {^{if settings['co2']}}
                    {{:~link('O', false, {'id_tag': id_tag, 'filter': 'co2', 'value': 'off'}, 'off')}}
                {{else}}
                    <a href="javascript:void(0);" class="off">O</a>
                {{/if}}
            </td>

            <td data-link="class{:settings['n2o'] ? 'inactive' : 'active'}">
                {^{if settings['n2o']}}
                    {{:~link('O', false, {'id_tag': id_tag, 'filter': 'n2o', 'value': 'off'}, 'off')}}
                {{else}}
                    <a href="javascript:void(0);" class="off">O</a>
                {{/if}}
            </td>

            <td data-link="class{:settings['toxins'] ? 'inactive' : 'active'}">
                {^{if settings['toxins']}}
                    {{:~link('O', false, {'id_tag': id_tag, 'filter': 'toxins', 'value': 'off'}, 'off')}}
                {{else}}
                    <a href="javascript:void(0);" class="off">O</a>
                {{/if}}
            </td>
        </tr>
        <tr>
            <td class="label">CO2</td>
            <td class="label">N2O</td>
            <td class="label">Toxins</td>
        </tr>
    </tbody>
</table>
