<!--
    Air Alarm - "Information" screen subtemplate.
    See nano/templates/airalarm.tmpl for more information.

    Parameters generated by this template:
    -   mode:       filtering, draught, panic, replace, off
    -   alarm:      true/false
-->

{^{if couldntObtainSample}}
<div class="notice">Couldn't gather air sample for analysis.</div>
{{/if}}

<table class="information">
    <tbody>
        <tr>
            <td class="label">Temperature</td>
            <td data-link="class{:info.temperature.danger}">
{^{:~round(info.temperature.value * 100)/100}} K
            </td>
        </tr>
        
        <tr class="odd">
            <td class="label">Air Pressure</td>
            <td data-link="class{:info.pressure.danger}">{^{:~round(info.pressure.value * 100)/100}} kPa
            </td>
        </tr>
    </tbody>
</table>

<table class="information">
    <tbody>
       {{for info.gases}}
           {^{if #index%2 == 0}}
        <tr>
            {{else}}
        <tr class="odd">
            {{/if}}
            <td class="label">{^{:name}}</td>
            <td data-link="class{:danger}">{^{:~round(value * 100)/100}}%</td>
        </tr>
        {{/for}}
    </tbody>
</table>

<table class="information">
    <tbody>
        <tr>
            <td class="label">Local Atmospherics Status</td>
            <td data-link="class{:info.habitability ? 'good' : 'bad'}">{^{:info.habitability ? 'Inhabitable' : 'Uninhabitable'}}</td>
        </tr>
        
        <tr class="odd">
            <td class="label">Air Alarm</td>
            <td data-link="class{:info.alarm ? 'bad' : 'good'}">
                {^{if isLocked && !userIsSilicon }}
                {^{:info.alarm ? 'Active' : 'Idle'}}                       
                {{else}}
                {^{:~link(info.alarm ? 'Active' : 'Idle', 'gear', {'alarm' : false}, isLocked ? 'disabled' : null, 'floatRight')}}
                {{/if}}

                <br>

                {^{if info.otherAlarmInArea}}
                <span class="average">This area contains an active air alarm.</span>
                {{/if}}
            </td>
        </tr>

        <tr>
            <td class="label">Atmospherics machinery mode</td>
            <td>
                {^{:~link('Filtering', machineryMode.filtering ? 'bullet' : 'radio-off', {'mode' : 'filtering'}, machineryMode.filtering ? 'selected' : null)}}

                {^{:~link('Draught', machineryMode.draught ? 'bullet' : 'radio-off', {'mode' : 'draught'}, machineryMode.draught ? 'selected' : null)}}

                {^{:~link('Panic', machineryMode.panic ? 'bullet' : 'radio-off', {'mode' : 'panic'}, machineryMode.draught ? 'selected average' : 'average')}}

                {^{:~link('Replace Air', machineryMode.replace ? 'bullet' : 'radio-off', {'mode' : 'replace'}, machineryMode.replace ? 'selected average' : 'average')}}

                {^{:~link('Offline', machineryMode.off ? 'bullet' : 'radio-off', {'mode' : 'off'}, machineryMode.off ? 'selected' : null)}}
            </td>
        </tr>
    </tbody>
</table>
